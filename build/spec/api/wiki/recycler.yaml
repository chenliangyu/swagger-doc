openapi: 3.0.0
info:
  title: wiki page相关接口
  description: |

    wiki page相关接口

  version: '2.0'

parameters:
  teamUUID:
    name: teamUUID
    in: path
    description: 团队UUID
    required: true
    minLength: 8
    maxLength: 8
    schema:
      type: string
  spaceUUID:
    name: spaceUUID
    in: path
    description: 页面组UUID
    required: true
    minLength: 8
    maxLength: 8
    schema:
      type: string
  pageUUID:
    name: pageUUID
    in: path
    description: 页面UUID
    required: true
    minLength: 8
    maxLength: 8
    schema:
      type: string
  new_space_uuid:
    name: new_space_uuid
    in: body
    description: 恢复至新的space的uuid
    required: false
    minLength: 8
    maxLength: 8
    schema:
      type: string
  new_parent_uuid:
    name: new_parent_uuid
    in: body
    description: 恢复至新的页面的parent_uuid
    required: false
    minLength: 8
    maxLength: 8
    schema:
      type: string
      
servers:
  - url: 'https://api.ones.ai/project/v1'
paths:
  /team/{teamUUID}/space/{spaceUUID}/deleted_page/{pageUUID}:
    get:
      tags: 
        - Page
      summary: 获取某个被删除page内容
      parameters:
        - $ref: '#/parameters/teamUUID'
        - $ref: '#/parameters/spaceUUID'
        - $ref: '#/parameters/pageUUID'
      responses:
        "200":
          description: 返回page详情
          content:
              application/json:
                schema:
                  $ref: '#/definitions/DeletedPage'
        "404":
          description: NotFound.Page 找不到被删除的page
                       NotFound.PageVersion 没有找到page_version
                       NotFound.Draft 没有找到对应的草稿
                       NotFound.Message 一般不会发生
                       
  /team/{teamUUID}/space/{spaceUUID}/deleted_page/{pageUUID}/delete:
    post:
      parameters: 
      - $ref: '#/parameters/teamUUID'
      - $ref: '#/parameters/spaceUUID'
      - $ref: '#/parameters/pageUUID'
      tags:
        - Page
      summary: 删除回收站内的某个页面
      responses:
        "200":
          description: 删除成功
        "404":
          description: NotFound.Page 找不到该page

  /team/{teamUUID}/space/{spaceUUID}/deleted_pages:
    get:
      tags: 
        - Page
      summary: 获取某space下的回收站内的pages
      parameters:
        - $ref: '#/parameters/teamUUID'
        - $ref: '#/parameters/spaceUUID'
      responses:
        "200":
          description: 返回page详情
          content:
              application/json:
                schema:
                  $ref: '#/definitions/ListPagesResponse'
        "500":
          description: ServerError

  /team/{teamUUID}/space/{spaceUUID}/deleted_page/{pageUUID}/restore:
    post:
      parameters: 
      - $ref: '#/parameters/teamUUID'
      - $ref: '#/parameters/spaceUUID'
      - $ref: '#/parameters/pageUUID'
      - $ref: '#/parameters/new_space_uuid'
      - $ref: '#/parameters/new_parent_uuid'
      tags:
        - Page
      summary: 恢复回收站内的page
      responses:
        "200":
          description: 成功
        "404":
          description: NotFound.Page 找不到该page
        "403":
          description: ConstraintViolation.DestinationInvalid 路径不合法

  /team/{teamUUID}/space/{spaceUUID}/deleted_page/{pageUUID}/delete_all_pages:
    post:
      parameters: 
      - $ref: '#/parameters/teamUUID'
      - $ref: '#/parameters/spaceUUID'
      - $ref: '#/parameters/pageUUID'
      tags:
        - Page
      summary: 清空回收站
      responses:
        "200":
          description: 删除成功
        "500":
          description: ServerError
          
definitions:
  DeletedPage:
    type: object
    properties:
      uuid:
        description: uuid
        type: string
        maxLength: 8
        minLength: 8
      space_uuid:
        description: space_uuid
        type: string
        maxLength: 8
        minLength: 8 
      owner_uuid:
        description: owner_uuid
        type: string
        maxLength: 8
        minLength: 8
      title:
        description: title
        type: string
      content:
        description: content
        type: string
      operator_uuid:
        description: operator_uuid
        type: string
        maxLength: 8
        minLength: 8
      operate_time:
        description: 操作时间
        type: integer
        format: int64
  ListPagesResponse:
    type: object
    properties:
      deleted_pages:
        type: array
        items:
          $ref: '#/definitions/DeletedPage'